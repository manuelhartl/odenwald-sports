<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../css/s2g.css" />
    <link rel="stylesheet" type="text/css" href="../css/s2g-index.css" />
    <link rel="stylesheet" type="text/css" href="../css/s2g-lo.css" />
    <meta charset="UTF-8">
	<script type='text/javascript' src='../script/jquery-3.0.0.js'></script>
	<script type='text/javascript' src='../script/knockout-3.4.0.js'></script>
	<script type='text/javascript' src='../script/memorystorage.js'></script>
	<script type='text/javascript' src='../script/data.js'></script>
	<script type='text/javascript' >

	
	// view_use_strict 'use strict';

	// class to represent a single user	
	var LoginViewModel = function() {
		var self = this;

		self.data = null;
		self.me = null;

		self.loginPassword = function(){
			Login($('#username').val(),  $('#password').val(), "tl", "lo");
		}
		
		self.cancelPassword = function(){
			setMessage("Login abgebrochen");
			// no session info to reset
			go2TourlistPage();
		}
		
		self.resetPassword = function(){
			var username = $('#username');
			// no session info to reset
			ResetPassword(username.val(), "tl", "lo");
		}
		self.showMessage = function(info){
			showMessage(info, document, 'message', 10);
		};

		/* --------- Construction --------- */
		removeAllSessionStorage();
		self.data = getData();
		self.me = getMe();
		
		// show message if available
		var message = getMessage();
		if( message != null && message != ""){
			self.showMessage(message);
		}		
	}
	
	</script>
	<title>Sport2Gether (KnockOut)</title>
</head>
<body onload="ko.applyBindings(new LoginViewModel());">
	<div class="total">
		<div id="navigation">
			<div id="navigation-top" class="small bigPortrait">
				<div id="message"></div>
				<div id="logo"></div>
			</div> <!--End div navigation-top -->
			<div id="navigation-bottom">
				<div id="navigation-buttons">
					<button id="btn-tour-list" data-bind="click: go2TourlistPage">Touren</button>
					<button class="bigPortrait" id="btn-user-list" data-bind="click: go2UserlistPage">Benutzerliste</button>
					<span data-bind="if: me!=null" class="bigPortrait">
						<button <button data-bind="click: go2StatisticPage">Statistik</button>
					</span >
				</div> <!--End div navigation-buttons -->
				<div id="navigation-buttons-logout" data-bind="if: me!=null">
					<button id="btn-logout" data-bind="click: Logout">Logout</button>
					<button id="btn-profil" data-bind="click: go2ProfilPage.bind($data, me.nickname), text: 'Profil '+ (me!=null?me.nickname:'')">Profil</button>
				</div> <!--End div navigation-buttons-logout (logged in) -->
				<div id="navigation-buttons-login" data-bind="ifnot: me!=null">
					<button id="btn-register" data-bind="click: go2RegisterPage">Register</button>
					<button id="btn-login" data-bind="click: go2LoginPage">Login</button>
				</div> <!--End div navigation-buttons-in (logged out) -->
			</div> <!--End div navigation-bottom -->
		</div> <!--End div navigation -->
		<div class="content" id="main">
			<div class="lo-Table">
				<div class="lo-TableBody">
					<div class="lo-TableRow lo-TableRow-Content lo-TableRow-Head small">&nbsp</div> <!-- div lo-TableRow ENDE -->
					<div class="lo-TableRow lo-TableRow-Content lo-TableRow-Username">
						<div class="lo-TableCell lo-TableCell-col-0 big">&nbsp</div>
						<div class="lo-TableCell lo-TableCell-col-1">
							<span class="lo-TableCell-Content-Username-1">Benutzername</span>
						</div>
						<div class="lo-TableCell lo-TableCell-col-2">
							<span class="lo-TableCell-Content-Username-2">
								<input type="text" id="username" name="username" placeholder="Benutzername" />
							</span>
						</div>
					</div> <!-- div to-TableRow ENDE -->
					<div class="lo-TableRow lo-TableRow-Content lo-TableRow-Username">
						<div class="lo-TableCell lo-TableCell-col-0 big ">&nbsp</div>
						<div class="lo-TableCell lo-TableCell-col-1">
							<span class="lo-TableCell-Content-Password-1">Passwort</span>
						</div>
						<div class="lo-TableCell lo-TableCell-col-2">
							<span class="lo-TableCell-Content-Password-2">
								<input type="password" id="password" name="password" placeholder="Passwort" />
							</span>
						</div>
					</div> <!-- div to-TableRow ENDE -->
					<div class="lo-TableRow lo-TableRow-Content lo-TableRow-Login">
						<div class="lo-TableCell lo-TableCell-col-0 big">&nbsp</div>
						<div class="lo-TableCell lo-TableCell-col-1">&nbsp</div>
						<div class="lo-TableCell lo-TableCell-Content-Login-1">
							<span class="lo-TableCell-Content-Login-2">
								<button id="btn-missingpassword" data-bind="click: resetPassword">Passwort vergessen</button>
							</span>
							<span class="lo-TableCell-Content-Login-3">
								<button id="btncancel" data-bind="click: cancelPassword">Abbrechen</button>
							</span>
							<span class="lo-TableCell-Content-Login-4">
								<button id="btnlogin" data-bind="click: loginPassword">Anmelden</button>
							</span>
						</div>
					</div> <!-- div to-TableRow ENDE -->
					<div class="lo-TableRow lo-TableRow-Content lo-TableRow-Foot small">&nbsp</div> <!-- div lo-TableRow ENDE -->
				</div> <!-- div lo-TableBody ENDE -->
			</div> <!-- div lo-Table ENDE -->

		</div> <!--End div content -->
		<div id="footer" class="small">
			<div id="version">
				<a href="html/FAQ.php" target="_blank">FAQ</a>
				<a href="html/disclaimer.php" target="_blank">Regeln</a>
				<a href="html/impressum.php" target="_blank">Impressum</a>
				<span data-bind="text: data.versioninfo" />
			</div> <!--End div version -->
		</div> <!--End div footer -->
	</div> <!--End div total -->
</body>
</html>